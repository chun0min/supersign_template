<!-- /* 웹화면 누락(임의로 생성함) */ -->
<head>    
  <meta charset="UTF-8">
  <title>템플릿 타입 TEST</title>    
  <style>        
    @import url("../../../css/editor/draggable-resizable/index.module.css");
    @import url("../../../css/editor/draggable-resizable/moveable.css");
    @import url("../../../css/editor/draggable-resizable/t_menu_new.css");   

    .menuItem + .menuItem {
      margin-top: 2rem;
    }
    .bg_on .itemGrid-A {
      background-color: rgba(0, 255, 255, 0.5);
    }
    .bg_on .itemGrid-B {
      background-color: rgba(115, 255, 0, 0.5);
    }
    .bg_on .itemGrid-C {
      background-color: rgba(247, 0, 255, 0.5);
    }
    .dragBox {
      cursor: grab;
    }
    input[type="radio"]:disabled {
      opacity : 0.5;
      cursor: not-allowed;
    }

  </style>
</head>
<body style="margin: 0;padding: 0;">

<div style="position: fixed; top:0; background-color: #fff; z-index: 9999;">
  <fieldset>
    <p>
      <label><input type="radio" name="background" value="1" data-class="bg_on" checked> 배경 표시</label>
      <label><input type="radio" name="background" value="2" data-class="bg_off"> 배경 비표시</label>
    </p>
    <legend>타입 선택</legend>
    <label><input type="radio" name="type" value="1" data-class="type-01" checked> 옵션 1</label>
    <label><input type="radio" name="type" value="2" data-class="type-02"> 옵션 2</label>
    <label><input type="radio" name="type" value="3" data-class="type-03"> 옵션 3</label>
    <label><input type="radio" name="type" value="4" data-class="type-04"> 옵션 4</label><br />
    <label><input type="radio" name="type" value="5" data-class="type-05"> 옵션 5</label>
    <label><input type="radio" name="type" value="6" data-class="type-06" disabled> 옵션 6</label>
    <label><input type="radio" name="type" value="7" data-class="type-07" disabled> 옵션 7</label>
    <label><input type="radio" name="type" value="8" data-class="type-08" disabled> 옵션 8</label>
    <p>
      <label>
        열 비율(%) :
        <input type="range" id="slider-col1" min="10" max="90" value="50">
      </label>
      <br>
      <label>
        행 비율(%) :
        <input type="range" id="slider-row1" min="10" max="90" value="50">
      </label>
      <br>
      <label>
        이미지 비율(%) :
        <input type="range" id="images-col" min="0" max="100" value="100">
      </label>
    </p>
  </fieldset>

  <fieldset>
    <legend>사이즈 위치 선택</legend>
    <label><input type="radio" name="sizeType" value="1" data-class="size_left" checked> 가격 앞</label>
    <label><input type="radio" name="sizeType" value="2" data-class="size_up"> 가격 위</label>
  </fieldset>

  <fieldset>
    <legend>칼로리 위치 선택</legend>
    <label><input type="radio" name="kcalType" value="1" data-class="kcal_right" checked> 가격 뒤</label>
    <label><input type="radio" name="kcalType" value="2" data-class="kcal_down"> 가격 아래</label>
  </fieldset>

  <fieldset>
    <legend>가격단위 위치 선택</legend>
    <label><input type="radio" name="priceType" value="1" data-class="price_left" checked> 가격 앞</label>
    <label><input type="radio" name="priceType" value="2" data-class="price_right"> 가격 뒤</label>
    <br />
    <label><input type="radio" name="priceTextType" value="1" data-class="priceText_left" checked> 텍스트 앞</label>
    <label><input type="radio" name="priceTextType" value="2" data-class="priceText_center"> 텍스트 중간</label>
    <label><input type="radio" name="priceTextType" value="3" data-class="priceText_right"> 텍스트 뒤</label>
  </fieldset>
  <p>
    *테스트용 드래그로 위치 변경 가능<br/>
    (박스안 순서는 위에서 아래로만 변경됨)
  </p>
</div>



<!-- 여기부터 템플릿 화면 -->
<style>
  .backgroundSize {
    width: 1920px;
    height: 1080px;
    background-size: 1920px 1080px;
    position: relative;
  }
  .widgetCon {
    position: absolute;
  }
</style>

<div
  id="editor"
  class="backgroundSize"
  style="background-image: url('background.png')"
>
  <!-- image -->
  <div>
    <img
      class="widgetCon"
      style="top: 0px; left: 0px; width: 813.51px; height: 1080px"
      src="img_01.png"
    />
  </div>
  <div>
    <img
      class="widgetCon"
      style="top: 60px; left: 1000px; width: 188px; height: 80px; z-index: 999;"
      src="img_05.svg"
    />
  </div>

  <!-- text -->
  <div
    class="widgetCon"
    style="
      top: 126px;
      left: 66px;
      width: 410px;
      height: 122px;
      text-align: left;
      color: rgba(255, 255, 255, 1);
      font-size: 110px;
      font-family: Bungee;
    "
  >
    SUSHI
  </div>
  <div
    class="widgetCon"
    style="
      top: 248px;
      left: 66px;
      width: 518px;
      height: 73px;
      text-align: left;
      color: rgba(255, 255, 255, 1);
      font-size: 60px;
      font-family: Bungee;
    "
  >
    RESTAURANT
  </div>
  <div
    class="widgetCon"
    style="
      top: 952px;
      left: 178px;
      width: 581px;
      height: 29px;
      text-align: right;
      color: rgba(225, 255, 255, 1);
      font-size: 24px;
      font-family: Bungee;
    "
  >
    000-0000-0000
  </div>
  <div
    class="widgetCon"
    style="
      top: 991px;
      left: 178px;
      width: 581px;
      height: 29px;
      text-align: right;
      color: rgba(225, 255, 255, 1);
      font-size: 24px;
      font-family: Bungee;
    "
  >
    OPEN 17:00~23:00
  </div>

  <!-- 여기부터 메뉴구성 레이아웃 -->
  <div
    id="editorItem7"
    class="undefined moveable_target _selected_1lhfl_9 zoom_10 undefined"
    role="application"
    tabindex="0"
    aria-label=", 콘텐츠 순서 : 8, 콘텐츠 타입 : t_menu"
    aria-roledescription="엔터를 클릭하여 아이템을 선택한 후 옵션 패널에서 속성을 변경할 수 있습니다."
    aria-haspopup="true"
    aria-expanded="false"
    style="
      width: 500px;
      height: 900px;
      top: 82px;
      left: 986px;
      transform: rotate(0deg);
    "
  >
    <div
      style="width: 100%; height: 100%; position: relative; overflow: hidden"
    >
      <div
        class="menuTypeArea"
        style="width: 100%; height: 100%;"
      >
        <div
          class="menuTypeGroup bg_on"
        >
          <div 
            class="menuItem itemGrid type-01" 
            style="
              grid-template-columns: calc(var(--col1) * 1%) calc(var(--col2) * 1%);
              grid-template-rows: calc(var(--row1) * 1%) calc(var(--row2) * 1%);
            ">
            <!-- Grid-A -->
            <div
              class="itemGrid-A dragContainer"
            >
              <div 
                class="image-cell dragBox" 
                draggable="true"
                style="width: calc(var(--imgW) * 1%);"
                >
                <img src="img_03.png" 
                alt="img_03.png의 썸네일입니다.">
              </div>
            </div>

            <!-- Grid-B -->
            <div
              class="itemGrid-B dragContainer"
            >
              <div 
                class="menuTitle dragBox"
                draggable="true"
                style="
                  font-family: 'Gothic A1';
                  font-size: 18px;
                  font-weight: bold;
                  font-style: normal;
                  color: rgb(255,255,255);
                  background-color: rgba(255, 255, 255, 0);
                  text-align: left;
                "
              >
                RED SNAPPER
              </div>
              <div
                class="menuInfo dragBox"
                draggable="true"
              >
                <div
                  class="menuExplain"
                  style="
                    font-family: 'Gothic A1';
                    font-size: 16px;
                    font-weight: normal;
                    font-style: normal;
                    color: rgb(255,255,255);
                    background-color: rgba(255, 255, 255, 0);
                    text-align: left;
                  "
                >
                  Add 100% fresh fish
                </div>
                <div
                  class="menuAllegy"
                  style="
                    font-family: 'Gothic A1';
                    font-size: 12px;
                    font-weight: normal;
                    font-style: normal;
                    color: rgb(255,255,255);
                    background-color: rgba(255, 255, 255, 0);
                    text-align: left;
                  "
                >
                  milk, nuts, eggs
                </div>
              </div>
            </div>

            <!-- Grid-C -->
            <div
              class="itemGrid-C dragContainer"
            >
              <div 
                class="menuOption dragBox"
                draggable="true"
                style="gap: 14px"
              >
                <div class="kcal_option kcal_right">
                  <div class="size_option size_left">
                    <span
                      style="
                        font-family: 'Gothic A1';
                        font-size: 20px;
                        font-weight: bold;
                        font-style: normal;
                        color: rgb(255, 158, 47);
                        background-color: rgba(255, 255, 255, 0);
                        text-align: left;
                      "
                    >
                      S
                    </span>
                    <div
                      class="price_option price_left"
                    >
                      <span
                        class="priceItem"
                        style="
                          font-family: 'Gothic A1';
                          font-size: 20px;
                          font-weight: bold;
                          font-style: normal;
                          color: rgb(255, 158, 47);
                          background-color: rgba(255, 255, 255, 0);
                          text-align: left;
                          margin-left: 0rem;
                        "
                      >
                        $
                      </span>
                      <span
                        style="
                          font-family: 'Gothic A1';
                          font-size: 20px;
                          font-weight: bold;
                          font-style: normal;
                          color: rgb(255, 158, 47);
                          background-color: rgba(255, 255, 255, 0);
                          text-align: left;
                          margin-left: 0rem;
                        "
                      >
                        12.0
                      </span>
                    </div>
                  </div>
                  <span
                    class="kcal-right"
                    style="
                      font-family: 'Gothic A1';
                      font-size: 12px;
                      font-weight: normal;
                      font-style: normal;
                      color: rgb(255, 255, 255);
                      background-color: rgba(255, 255, 255, 0);
                      text-align: left;
                      margin-left: 0.5rem;
                    "
                  >
                    240 kcal
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div 
            class="menuItem itemGrid type-01" 
            style="
              grid-template-columns: calc(var(--col1) * 1%) calc(var(--col2) * 1%);
              grid-template-rows: calc(var(--row1) * 1%) calc(var(--row2) * 1%);
            ">
            <!-- Grid-A -->
            <div
              class="itemGrid-A dragContainer"
            >
              <div 
                class="image-cell dragBox" 
                draggable="true"
                style="width: calc(var(--imgW) * 1%);"
              >
                <img src="img_04.png" 
                alt="img_04.png의 썸네일입니다.">
              </div>
            </div>

            <!-- Grid-B -->
            <div
              class="itemGrid-B dragContainer"
            >
              <div 
                class="menuTitle dragBox"
                draggable="true"
                style="
                  font-family: 'Gothic A1';
                  font-size: 18px;
                  font-weight: bold;
                  font-style: normal;
                  color: rgb(255,255,255);
                  background-color: rgba(255, 255, 255, 0);
                  text-align: left;
                "
              >
                EEL SUSHI EEL SUSHI EEL SUSHI EEL SUSHI EEL SUSHI
              </div>
              <div
                class="menuInfo dragBox"
                draggable="true"
              >
                <div
                  class="menuExplain"
                  style="
                    font-family: 'Gothic A1';
                    font-size: 16px;
                    font-weight: normal;
                    font-style: normal;
                    color: rgb(255,255,255);
                    background-color: rgba(255, 255, 255, 0);
                    text-align: left;
                  "
                >
                  Add 100% fresh fish Add 100% fresh fish Add 100% fresh fish
                </div>
                <div
                  class="menuAllegy"
                  style="
                    font-family: 'Gothic A1';
                    font-size: 12px;
                    font-weight: normal;
                    font-style: normal;
                    color: rgb(255,255,255);
                    background-color: rgba(255, 255, 255, 0);
                    text-align: left;
                  "
                >
                  milk, nuts, eggs, peanuts, fish, wheat, shellfish, soybeans, sesame
                </div>
              </div>
            </div>

            <!-- Grid-C -->
            <div
              class="itemGrid-C dragContainer"
            >
              <div 
                class="menuOption dragBox"
                draggable="true"
                style="gap: 14px"
              >
                <div class="kcal_option kcal_right">
                  <div class="size_option size_left">
                    <span
                      style="
                        font-family: 'Gothic A1';
                        font-size: 20px;
                        font-weight: bold;
                        font-style: normal;
                        color: rgb(255, 158, 47);
                        background-color: rgba(255, 255, 255, 0);
                        text-align: left;
                      "
                    >
                      SMALL
                    </span>
                    <div
                      class="price_option price_left"
                    >
                      <span
                        class="priceItem"
                        style="
                          font-family: 'Gothic A1';
                          font-size: 20px;
                          font-weight: bold;
                          font-style: normal;
                          color: rgb(255, 158, 47);
                          background-color: rgba(255, 255, 255, 0);
                          text-align: left;
                          margin-left: 0rem;
                        "
                      >
                        $
                      </span>
                      <span
                        style="
                          font-family: 'Gothic A1';
                          font-size: 20px;
                          font-weight: bold;
                          font-style: normal;
                          color: rgb(255, 158, 47);
                          background-color: rgba(255, 255, 255, 0);
                          text-align: left;
                          margin-left: 0rem;
                        "
                      >
                        12.0
                      </span>
                    </div>
                  </div>
                  <span
                    class="kcal-right"
                    style="
                      font-family: 'Gothic A1';
                      font-size: 12px;
                      font-weight: normal;
                      font-style: normal;
                      color: rgb(255, 255, 255);
                      background-color: rgba(255, 255, 255, 0);
                      text-align: left;
                      margin-left: 0.5rem;
                    "
                  >
                    240 kcal
                  </span>
                </div>
                <div class="kcal_option kcal_right">
                  <div class="size_option size_left">
                    <span
                      style="
                        font-family: 'Gothic A1';
                        font-size: 20px;
                        font-weight: bold;
                        font-style: normal;
                        color: rgb(255, 158, 47);
                        background-color: rgba(255, 255, 255, 0);
                        text-align: left;
                      "
                    >
                      MEDIUM
                    </span>
                    <div
                      class="price_option price_left"
                    >
                      <span
                        class="priceItem"
                        style="
                          font-family: 'Gothic A1';
                          font-size: 20px;
                          font-weight: bold;
                          font-style: normal;
                          color: rgb(255, 158, 47);
                          background-color: rgba(255, 255, 255, 0);
                          text-align: left;
                          margin-left: 0rem;
                        "
                      >
                        $
                      </span>
                      <span
                        style="
                          font-family: 'Gothic A1';
                          font-size: 20px;
                          font-weight: bold;
                          font-style: normal;
                          color: rgb(255, 158, 47);
                          background-color: rgba(255, 255, 255, 0);
                          text-align: left;
                          margin-left: 0rem;
                        "
                      >
                        12.5
                      </span>
                    </div>
                  </div>
                  <span
                    class="kcal-right"
                    style="
                      font-family: 'Gothic A1';
                      font-size: 12px;
                      font-weight: normal;
                      font-style: normal;
                      color: rgb(255, 255, 255);
                      background-color: rgba(255, 255, 255, 0);
                      text-align: left;
                      margin-left: 0.5rem;
                    "
                  >
                    260 kcal
                  </span>
                </div>
                <div class="kcal_option kcal_right">
                  <div class="size_option size_left">
                    <span
                      style="
                        font-family: 'Gothic A1';
                        font-size: 20px;
                        font-weight: bold;
                        font-style: normal;
                        color: rgb(255, 158, 47);
                        background-color: rgba(255, 255, 255, 0);
                        text-align: left;
                      "
                    >
                      LARGE
                    </span>
                    <div
                      class="price_option price_left"
                    >
                      <span
                        class="priceItem"
                        style="
                          font-family: 'Gothic A1';
                          font-size: 20px;
                          font-weight: bold;
                          font-style: normal;
                          color: rgb(255, 158, 47);
                          background-color: rgba(255, 255, 255, 0);
                          text-align: left;
                          margin-left: 0rem;
                        "
                      >
                        $
                      </span>
                      <span
                        style="
                          font-family: 'Gothic A1';
                          font-size: 20px;
                          font-weight: bold;
                          font-style: normal;
                          color: rgb(255, 158, 47);
                          background-color: rgba(255, 255, 255, 0);
                          text-align: left;
                          margin-left: 0rem;
                        "
                      >
                        13.0
                      </span>
                    </div>
                  </div>
                  <span
                    class="kcal-right"
                    style="
                      font-family: 'Gothic A1';
                      font-size: 12px;
                      font-weight: normal;
                      font-style: normal;
                      color: rgb(255, 255, 255);
                      background-color: rgba(255, 255, 255, 0);
                      text-align: left;
                      margin-left: 0.5rem;
                    "
                  >
                    300 kcal
                  </span>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
  <!-- 여기까지 -->

</div>


<script>
  // 변경 대상 요소
  const background = document.querySelectorAll('.menuTypeGroup');
  const preview = document.querySelectorAll('.menuTypeGroup .menuItem');
  const sizepreview = document.querySelectorAll('.menuTypeGroup .menuItem .size_option');
  const kcalpreview = document.querySelectorAll('.menuTypeGroup .menuItem .kcal_option');
  const pricepreview = document.querySelectorAll('.menuTypeGroup .menuItem .price_option');

  // 허용할 클래스 목록(안전하게 이전 클래스 제거용)
  const BgAllowed = ['bg_on','bg_off'];
  const allowed = ['type-01','type-02','type-03','type-04','type-05','type-06','type-07','type-08'];
  const sizeAllowed = ['size_up','size_left'];
  const kcalAllowed = ['kcal_down','kcal_right'];
  const priceAllowed = ['price_left','price_right'];
  const priceTextAllowed = ['priceText_left', 'priceText_center', 'priceText_right'];

  // 라디오 변경 시 실행
  document.addEventListener('change', (e) => {
    if (e.target.matches('input[name="background"]')) {
      const next = e.target.dataset.class; // data-class 읽기
      background.forEach(el => {
        el.classList.remove(...BgAllowed);   // 이전 클래스 제거
        el.classList.add(next);            // 새 클래스 적용
      });
    }
    if (e.target.matches('input[name="type"]')) {
      const next = e.target.dataset.class; // data-class 읽기
      preview.forEach(el => {
        el.classList.remove(...allowed);   // 이전 클래스 제거
        el.classList.add(next);            // 새 클래스 적용
      });
    }
    if (e.target.matches('input[name="sizeType"]')) {
      const next = e.target.dataset.class; // data-class 읽기
      sizepreview.forEach(el => {
        el.classList.remove(...sizeAllowed);   // 이전 클래스 제거
        el.classList.add(next);            // 새 클래스 적용
      });
    }
    if (e.target.matches('input[name="kcalType"]')) {
      const next = e.target.dataset.class; // data-class 읽기
      kcalpreview.forEach(el => {
        el.classList.remove(...kcalAllowed);   // 이전 클래스 제거
        el.classList.add(next);            // 새 클래스 적용
      });
    }
    if (e.target.matches('input[name="priceType"]')) {
      const next = e.target.dataset.class; // data-class 읽기
      pricepreview.forEach(el => {
        el.classList.remove(...priceAllowed);   // 이전 클래스 제거
        el.classList.add(next);            // 새 클래스 적용
      });
    }
    if (e.target.matches('input[name="priceTextType"]')) {
      const next = e.target.dataset.class; // data-class 읽기
      pricepreview.forEach(el => {
        el.classList.remove(...priceTextAllowed);   // 이전 클래스 제거
        el.classList.add(next);            // 새 클래스 적용
      });
    }
  });

  // 페이지 로드 시 초기 상태 동기화
  (function syncOnLoad() {
    const checked = document.querySelector('input[name="type"]:checked');
    if (checked) {
      const next = checked.dataset.class;
      preview.forEach(el => {
        el.classList.remove(...allowed);
        el.classList.add(next);
      });
    }
  })();


  // 드래그로 옵션 이동
    let dragItemGrid = null;

    const boxes = document.querySelectorAll(".dragBox");
    const containers = document.querySelectorAll(".dragContainer");

    boxes.forEach(box => {
      box.addEventListener("dragstart", (e) => {
        dragItemGrid = box.closest(".itemGrid"); // 현재 박스가 속한 itemGrid 저장
        e.dataTransfer.setData("text/plain", box.textContent);
        e.dataTransfer.effectAllowed = "move";
        box.classList.add("dragging");
      });

      box.addEventListener("dragend", () => {
        box.classList.remove("dragging");
        dragItemGrid = null;
      });
    });

    containers.forEach(container => {
      container.addEventListener("dragover", (e) => {
        // 같은 itemGrid 안에 있는 container일 때만 허용
        if (container.closest(".itemGrid") === dragItemGrid) {
          e.preventDefault();
          container.classList.add("over");
          e.dataTransfer.dropEffect = "move";
        }
      });

      container.addEventListener("dragleave", () => {
        container.classList.remove("over");
      });

      container.addEventListener("drop", (e) => {
        if (container.closest(".itemGrid") === dragItemGrid) {
          e.preventDefault();
          const dragging = document.querySelector(".dragging");
          if (dragging) {
            container.appendChild(dragging);
          }
        }
        container.classList.remove("over");
      });
    });

    // 행과 열 조절
    const sliderCol1 = document.getElementById('slider-col1');
    const sliderRow1 = document.getElementById('slider-row1');
    const imagesCol = document.getElementById('images-col');
    const grids = document.querySelectorAll('.itemGrid.type-01');

    // 1열 비율 조절 → 2열 자동 계산
    sliderCol1.addEventListener('input', (e) => {
      const col1 = e.target.value;
      const col2 = 100 - col1;
      grids.forEach(grid => {
        grid.style.setProperty('--col1', col1);
        grid.style.setProperty('--col2', col2);
      });
    });

    // 1행 비율 조절 → 2행 자동 계산
    sliderRow1.addEventListener('input', (e) => {
      const row1 = e.target.value;
      const row2 = 100 - row1;
      grids.forEach(grid => {
        grid.style.setProperty('--row1', row1);
        grid.style.setProperty('--row2', row2);
      });
    });

    // 이미지 비율 조절
    imagesCol.addEventListener('input', (e) => {
      const imgW = e.target.value;
      grids.forEach(grid => {
        grid.style.setProperty('--imgW', imgW);
      });
    });

    container.addEventListener("dragover", (e) => {
      if (container.closest(".itemGrid") === dragItemGrid) {
        e.preventDefault();
        container.classList.add("over");
      }
    });

</script>
<body>